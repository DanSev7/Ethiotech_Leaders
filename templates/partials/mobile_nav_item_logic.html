{% load icon_filters %}

{% if nav_item.is_dropdown %}
    <div>
        {% if nav_item.is_button %}
            <a href="{% if nav_item.button_url %}{{ nav_item.button_url }}{% else %}{% if nav_item.url %}{{ nav_item.url }}{% else %}#{% endif %}{% endif %}" 
                target="{{ nav_item.button_target|default:'_self' }}"
                class="block w-full text-left px-4 py-2 rounded-md font-semibold mb-2 shadow-sm"
                style="background-color: {{ nav_item.button_color }}; color: {{ nav_item.button_text_color }};">
                {{ nav_item.button_label|default:nav_item.label }}
            </a>
        {% else %}
            <a href="{% if nav_item.url %}{{ nav_item.url }}{% else %}#{% endif %}" class="block px-4 py-2 font-semibold text-gray-800 hover:bg-gray-50">
                {{ nav_item.label }}
            </a>
        {% endif %}
        
        {% if nav_item.dropdown_items.all %}
            <div class="pl-4 border-l ml-4 border-gray-200">
                {% for dropdown_item in nav_item.dropdown_items.all %}
                    <a href="{{ dropdown_item.url }}" class="block px-4 py-2 text-sm text-gray-600 hover:text-blue-600">{{ dropdown_item.label }}</a>
                {% endfor %}
            </div>
        {% endif %}
    </div>
{% elif nav_item.is_button %}
    <a href="{{ nav_item.button_url }}" 
        target="{{ nav_item.button_target|default:'_self' }}"
        class="block w-full text-left px-4 py-2 rounded-md font-semibold shadow-sm hover:opacity-90"
        style="background-color: {{ nav_item.button_color }}; color: {{ nav_item.button_text_color }};">
        {{ nav_item.button_label|default:nav_item.label }}
    </a>
{% else %}
    <a href="{% if nav_item.url %}{{ nav_item.url }}{% else %}#{% endif %}" class="block px-4 py-2 font-semibold text-gray-800 hover:bg-gray-50">
        {{ nav_item.label }}
    </a>
{% endif %}